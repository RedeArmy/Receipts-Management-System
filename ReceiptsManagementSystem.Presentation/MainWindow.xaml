<Window x:Class="ReceiptsManagementSystem.Presentation.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewModels="clr-namespace:ReceiptsManagementSystem.Presentation.ViewModels"
        xmlns:receipts="clr-namespace:ReceiptsManagementSystem.Presentation.ViewModels.Receipts"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=viewModels:MainViewModel}"
        Title="{Binding Localization.AppTitle}"
        Height="800"
        Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundColor}">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0"
                Background="{StaticResource SidebarColor}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="20,30,20,40">
                    <TextBlock Text="{Binding Localization.AppTitle}"
                               FontSize="22"
                               FontWeight="Bold"
                               Foreground="{StaticResource TextOnDarkColor}" />
                    <TextBlock Text="{Binding Localization.AppSubtitle}"
                               FontSize="12"
                               Foreground="{StaticResource TextSecondaryColor}"
                               Margin="0,4,0,0" />
                </StackPanel>

                <StackPanel Grid.Row="1">
                    <Button Content="{Binding Localization.NavReceipts}"
                            Command="{Binding NavigateToReceiptListCommand}">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ActiveMenu}" Value="Receipts">
                                        <Setter Property="Background" Value="{StaticResource PrimaryColor}" />
                                        <Setter Property="FontWeight" Value="SemiBold" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <Button Content="{Binding Localization.NavNewReceipt}"
                            Command="{Binding NavigateToCreateReceiptCommand}">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ActiveMenu}" Value="CreateReceipt">
                                        <Setter Property="Background" Value="{StaticResource PrimaryColor}" />
                                        <Setter Property="FontWeight" Value="SemiBold" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>

                <StackPanel Grid.Row="2" Margin="20,0,20,30">
                    <Separator Background="{StaticResource HoverColor}"
                               Margin="0,0,0,20" />

                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center"
                                Margin="0,0,0,15">

                        <Button Tag="es-GT"
                                ToolTip="{Binding Localization.LanguageSpanish}"
                                Command="{Binding ChangeLanguageCommand}"
                                CommandParameter="es-GT"
                                Width="60"
                                Height="35"
                                Margin="0,0,8,0">

                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SecondaryButton}">
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding SelectedLanguage}" Value="es-GT"/>
                                                <Condition Binding="{Binding Tag, RelativeSource={RelativeSource Self}}" Value="es-GT"/>
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="BorderBrush" Value="#0078D7"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Setter Property="Background" Value="#E5F1FB"/>
                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>

                            <Image Source="/Assets/Flags/spain.png"
                                   Width="24"
                                   Height="16"
                                   Stretch="Uniform"/>
                        </Button>

                        <Button Tag="en-US"
                                ToolTip="{Binding Localization.LanguageEnglish}"
                                Command="{Binding ChangeLanguageCommand}"
                                CommandParameter="en-US"
                                Width="60"
                                Height="35">

                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource SecondaryButton}">
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding SelectedLanguage}" Value="en-US"/>
                                                <Condition Binding="{Binding Tag, RelativeSource={RelativeSource Self}}" Value="en-US"/>
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="BorderBrush" Value="#0078D7"/>
                                            <Setter Property="BorderThickness" Value="2"/>
                                            <Setter Property="Background" Value="#E5F1FB"/>
                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>

                            <Image Source="/Assets/Flags/uk.png"
                                   Width="24"
                                   Height="16"
                                   Stretch="Uniform"/>
                        </Button>

                    </StackPanel>

                    <Button Command="{Binding ExitCommand}"
                            Style="{StaticResource SidebarButton}"
                            Margin="8,4,8,15"
                            Foreground="{StaticResource DangerColor}">
                        <StackPanel Orientation="Horizontal">
                            <Viewbox Width="16" Height="16" Margin="0,0,8,0">
                                <Canvas Width="24" Height="24">
                                    <Path Data="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"
                                          Fill="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}" />
                                </Canvas>
                            </Viewbox>
                            <TextBlock Text="{Binding Localization.NavExit}"
                                       VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>

                    <TextBlock Text="{Binding Localization.Version}"
                               FontSize="11"
                               Foreground="{StaticResource TextSecondaryColor}"
                               HorizontalAlignment="Center" />
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Border Grid.Row="0"
                    Background="{StaticResource SurfaceColor}"
                    BorderBrush="{StaticResource BorderColor}"
                    BorderThickness="0,0,0,1"
                    Padding="30,20">
                <TextBlock Text="{Binding Title}"
                           FontSize="24"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextPrimaryColor}" />
            </Border>

            <ContentControl Grid.Row="1"
                            Content="{Binding CurrentViewModel}"
                            Margin="30">
                <ContentControl.Resources>
                    <DataTemplate DataType="{x:Type receipts:ReceiptListViewModel}">
                        <TextBlock Text="Vista de Recibos (próximamente)"
                                   FontSize="18"
                                   Foreground="{StaticResource TextSecondaryColor}" />
                    </DataTemplate>

                    <DataTemplate DataType="{x:Type receipts:CreateReceiptViewModel}">
                        <TextBlock Text="Vista de Crear Recibo (próximamente)"
                                   FontSize="18"
                                   Foreground="{StaticResource TextSecondaryColor}" />
                    </DataTemplate>
                </ContentControl.Resources>
            </ContentControl>
        </Grid>
    </Grid>
</Window>
